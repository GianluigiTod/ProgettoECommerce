<div class="user-details">
  <h2>Dettagli Utente</h2>

  <!-- Visualizza il messaggio di errore -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Visualizzazione condizionale dei campi di modifica -->
  <div *ngIf="editing; else viewMode">
    <div>
      <label for="username">Username:</label>
      <input id="username" [(ngModel)]="user.username" placeholder="Username" />
    </div>
    <div>
      <label for="password">Password:</label>
      <input id="password" [(ngModel)]="user.password" type="password" placeholder="Password" />
    </div>
    <div>
      <label for="email">Email:</label>
      <input id="email" [(ngModel)]="user.email" placeholder="Email" />
    </div>
    <div>
      <label for="ruolo">Ruolo:</label>
      <select id="ruolo" [(ngModel)]="user.ruolo">
        <option value="cliente">Cliente</option>
        <option value="admin">Admin</option>
        <option value="venditore">Venditore</option>
      </select>
    </div>
    <div>
      <label for="nome">Nome:</label>
      <input id="nome" [(ngModel)]="user.nome" placeholder="Nome" />
    </div>
    <div>
      <label for="cognome">Cognome:</label>
      <input id="cognome" [(ngModel)]="user.cognome" placeholder="Cognome" />
    </div>
    <div>
      <label for="indirizzo">Indirizzo:</label>
      <input id="indirizzo" [(ngModel)]="user.indirizzo" placeholder="Indirizzo" />
    </div>

    <button (click)="saveChanges()" [disabled]="!hasChanges()">OK</button>
    <button (click)="confirmDelete()">Elimina Utente</button>
    <button (click)="editUser()">Annulla Modifiche</button>
  </div>

  <!-- Modalità visualizzazione -->
  <ng-template #viewMode>
    <div>
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Ruolo:</strong> {{ user.ruolo }}</p>
      <p><strong>Nome:</strong> {{ user.nome }}</p>
      <p><strong>Cognome:</strong> {{ user.cognome }}</p>
      <p><strong>Indirizzo:</strong> {{ user.indirizzo }}</p>

      <!-- Bottone per abilitare la modalità di modifica -->
      <button (click)="editUser()">Modifica</button>
    </div>
  </ng-template>

  <!-- Overlay semitrasparente -->
  <div *ngIf="showConfirmDialog" class="overlay"></div>

  <!-- Conferma eliminazione -->
  <div *ngIf="showConfirmDialog" class="confirm-dialog">
    <p>Sei sicuro di voler eliminare il tuo account?</p>
    <button (click)="showConfirmDialog = false">Annulla</button>
    <button (click)="deleteUser()">Conferma</button>
  </div>


</div>
